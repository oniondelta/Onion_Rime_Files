##
##########ã€Šè¦ç±³ plus è¨­å®šä¸»é ã€‹############
schema:
  author:
    - "æ´‹è”¥"
  description: |
    è¼¸å…¥æ³•

  name: "â–åˆ†åˆ¥èª¿å‡ºè¦ç±³(plus)â–"
  schema_id: dif1
  version: "202106"
  dependencies:
    - punct_ovff
    - dif1_jphi
    - dif1_jpka
    - dif1_kr
    - dif1_la
    - dif1_gr
    - dif1_cy
    - dif1_fs
    - Mount_bopomo
    - allbpm
    - easy_en_b
    - symbols_ocm

switches:
  - name: ascii_mode
    reset: 0
    states: ["ä¸­æ–‡", "è‹±æ–‡"]
  - name: full_shape
    reset: 0
    states: ["åŠå½¢", "å…¨å½¢"]
  - name: ascii_punct #ç•¶éµä½è¢«ä½”ç”¨ï¼Œåœ¨å¤§åƒæ³¨éŸ³éµç›¤ç„¡æ³•ä½œç”¨ï¼
    reset: 0
    states: [ "ã€‚ï¼Œ", "ï¼ï¼Œ" ]
  - name: simplification
    reset: 0
    states: ["åŸé«”", "ç®€ä½“"]
  - name: zh_tw
    reset: 0
    states: ["å®Œæ•´", "ç²¾ç°¡"]
#   - options: [ utf8, big5, gbk, gb2312]
# #    reset: 0
#     states:
#       - UTF-8
#       - BIG5
#       - GBK
#       - GB2312 #GB2312æœ‰Bug
  - name: emoji_segestion
    reset: 1
    states: [ ç„¡, ğŸˆ¶ï¸ï¸ ]
  - name: back_mark
    reset: 1
    states: [ ç„¡, è¨» ]
  - name: punct_mark
    reset: 1
#    states: [ ç„¡, è¨» ]

engine:
  filters:
    - simplifier@zh_tw
    - lua_filter@charset_filter2  #å»é™¤openccè½‰æ›å¾Œç•™ä¸‹çš„ã€Œá°¼á°¼ã€ã€‚
#    - charset_filter@big5
#    - charset_filter@gbk
#    - charset_filter@gb2312
    - simplifier
    - simplifier@emoji_switch
    - simplifier@back_mark
    - simplifier@punct_mark
    - reverse_lookup_filter@top_reverse_lookup
    - reverse_lookup_filter@ovff_reverse_lookup
    - reverse_lookup_filter@phonetic_reverse_lookup
    - reverse_lookup_filter@e_reverse_lookup
    - uniquifier
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - affix_segmentor@pt
    - affix_segmentor@emoji_series
    - affix_segmentor@easy_en
    - affix_segmentor@reverse2_lookup
    - affix_segmentor@reverse3_lookup
    - affix_segmentor@reverse3_lookup_extra
    - affix_segmentor@all_bpm
    - affix_segmentor@jphi_lookup
    - affix_segmentor@jpka_lookup
    - affix_segmentor@korea_lookup
    - affix_segmentor@latin_lookup
    - affix_segmentor@fs_lookup
    - affix_segmentor@gr_lookup
    - affix_segmentor@cyr_lookup
    - punct_segmentor
    - fallback_segmentor
  translators:
#ä»¥ä¸‹çš„æ’åºæœƒåš´é‡å½±éŸ¿åˆ°å‡ºå­—è©çš„æ’åºï¼Œç”šè‡³æœƒéŒ¯äº‚
    - punct_translator
    - table_translator@dif1_phrase
    - table_translator@pt
    - script_translator@jphi_lookup
    - script_translator@jpka_lookup
    - script_translator@korea_lookup
    - script_translator@latin_lookup
    - script_translator@gr_lookup
    - script_translator@cyr_lookup
    - script_translator@fs_lookup
    - table_translator@top_fixed
    - script_translator
    - table_translator@emoji_series
    - script_translator@reverse2_lookup
    - table_translator@reverse3_lookup
    - script_translator@reverse3_lookup_extra
    - script_translator@all_bpm
    - table_translator@easy_en
    - lua_translator@t2_translator
################################### é¸å–® ################################################
menu:
  alternative_select_keys: "0123456789"
  page_size: 9
################################### æ¿¾é¡ ################################################
simplifier:
  tips: all

zh_tw:
  opencc_config: ocm_big5e_hkscs_jis.json #s2tw.json #t2tw.json
  option_name: zh_tw
  tags: [ abc, reverse2_lookup, reverse3_lookup ]
#  tips: all

emoji_switch:
  opencc_config: emoji.json
  option_name: emoji_segestion
  tags: [ abc ]
  tips: all
  comment_format: 
    - xform/^.+$/ /

back_mark:
  opencc_config: back_mark.json
  option_name: back_mark
  show_in_comment: true
  tags: [ latin_lookup, jphi_lookup, jpka_lookup, korea_lookup, fs_lookup, emoji_series ]
  tips: char #all
  comment_format:
    - xform/^/  /
    - xform/@/ /

punct_mark:
  opencc_config: punct_mark.json
  option_name: punct_mark
  show_in_comment: true
  tags: [ punct ]
  tips: all
  comment_format:
    - erase/^.*ã€”.*ã€•.+$/
    - erase/^.+ã€”.*ã€•$/
################################### æ‹¼å¯« ######################################
speller:
  alphabet: "abcdefghijklmnopqrstuvwxyz;-"
  delimiter: "\\`"
################################### çŸ­èªå’Œå¤–æ›æ¨™é» ######################################
dif1_phrase:
  dictionary: ""
  user_dict: dif1_phrase
  db_class: stabledb
  enable_completion: false
  enable_sentence: false

pt:
  tag: pt
  dictionary: punct_ovff
  enable_completion: false
  enable_sentence: false
  enable_user_dict: false
  preedit_format:
    - xform/^/ã€”è¦ç¬¦ã€•/
################################### ä¸»å¼•æ“ ######################################
translator:
  dictionary: dif1.extended
  enable_user_dict: true
  enable_encoder: false
  enable_sentence: false
  encode_commit_history: false
  enable_completion: false
  enable_charset_filter: false
  preedit_format:
    - "xlit|abcdefghijklmnopqrstuvwxyz|ABCDEFGHIJKLMNOPQRSTUVWXYZ|"
    - xform/\\/  /
    - xform/`/  /
####################### æ–°å–®å­—å›ºé ‚åŠŸèƒ½ #######################
top_fixed:
  __include: /translator
  enable_user_dict: false
  initial_quality: 1000
####################### å¾Œæ–¹é¡¯ç¤ºå˜¸ç±³ç¢¼ #######################
top_reverse_lookup:
  tags: [ abc ]
  overwrite_comment: false
  dictionary: dif1.extended
  comment_format:
    - "xlit|abcdefghijklmnopqrstuvwxyz|á´€Ê™á´„á´…á´‡êœ°É¢ÊœÉªá´Šá´‹ÊŸá´É´á´á´˜Ç«Ê€sá´›á´œá´ á´¡xÊá´¢|"
######################èª¿å‡ºå…¶ä»–èªè¨€ä¹‹ç¿»è­¯å™¨(çµå°¾ç¬¦è™Ÿèª¿å‡ºå„åœ‹èªè¨€è¼¸å…¥)################
jphi_lookup:
  tag: jphi_lookup
  dictionary: dif1_jp.extended
  prism: dif1_jphi
  enable_completion: false
  enable_sentence: false
  enable_user_dict: true
  suffix: ","
  disable_user_dict_for_patterns:
    - ^[kstnhmrgzdbp][aiueo][,]$
    - ^[sc][h][i][,]$
    - ^[t][s][u][,]$
    - ^[f][u][,]$
    - ^[y][auo][,]$
    - ^[w][ao][,]$
    - ^[n][,]$
    - ^[kgsztnhbpmr][y][auo][,]$
    - ^[sc][h][auo][,]$
    - ^[j][auo][,]$
    - ^[-]{1,2}[,]$
  preedit_format:
    - "xlit|,|A|"
    - xform/A/ (å¹³)/
    - xform/\\/ /
    - xform/`/ /

jpka_lookup:
  tag: jpka_lookup
  dictionary: dif1_jp.extended
  prism: dif1_jpka
  enable_completion: false
  enable_sentence: false
  enable_user_dict: true
  suffix: "."
  disable_user_dict_for_patterns:
    - ^[kstnhmrgzdbp][aiueo][.]$
    - ^[sc][h][i][.]$
    - ^[t][s][u][.]$
    - ^[f][u][.]$
    - ^[y][auo][.]$
    - ^[w][ao][.]$
    - ^[n][.]$
    - ^[kgsztnhbpmr][y][auo][.]$
    - ^[sc][h][auo][.]$
    - ^[j][auo][.]$
    - ^[-]{1,2}[.]$
  preedit_format:
    - "xlit|.|A|"
    - xform/A/ (ç‰‡)/
    - xform/\\/ /
    - xform/`/ /

korea_lookup:
  tag: korea_lookup
  dictionary: dif1_kr.extended
  prism: dif1_kr
  enable_completion: false
  enable_sentence: false
  enable_user_dict: true
  suffix: "/"
  disable_user_dict_for_patterns:
    - ^[a-z]{1,2}[/]$
  preedit_format:
    - "xlit|abcdefghijklmnopqrstuvwxyz/|ã…‚ã……ã„·ã…Šã…Œã…‘ã…•ã…ã…£ã…“ã…ã„´ã…›ã…—ã…ã…”ã…‡ã… ã„¹ã…œã…ˆã…¡ã…ã…ã„±ã…‹A|"
    - xform/AA/ (éŸ“-HJ)/
    - xform/A/ (éŸ“)/
    - xform/\\/ /
    - xform/`/ /

latin_lookup:
  tag: latin_lookup
  dictionary: dif1_la.extended
  prism: dif1_la
  enable_completion: false
  enable_sentence: false
  enable_user_dict: true
  suffix: "'"
  preedit_format:
    - "xlit|'|A|"
    - xform/AAA/ (æ‹‰-çµ„åˆ)/
    - xform/AA/ (æ‹‰-å¤§)/
    - xform/A/ (æ‹‰)/
    - xform/\\/ /
    - xform/`/ /

gr_lookup:
  tag: gr_lookup
  dictionary: greek.extended
  prism: dif1_gr
  enable_completion: false
  enable_sentence: false
  enable_user_dict: true
  suffix: "["
  disable_user_dict_for_patterns:
    - ^[a-z]{1}[\[]$
  preedit_format:
    - "xlit|[|A|"
    - xform/AA/ (å¸Œ-å¤§)/
    - xform/A/ (å¸Œ)/
    - xform/\\/ /
    - xform/`/ /

cyr_lookup:
  tag: cyr_lookup
  dictionary: cyrillic.extended
  prism: dif1_cy
  enable_completion: false
  enable_sentence: false
  enable_user_dict: true
  suffix: "]"
  disable_user_dict_for_patterns:
    - ^[a-z]{1}[\]]$
    - ^[b][fir][\]]$
    - ^[e][b][\]]$
    - ^[n][u][\]]$
    - ^[r][k][\]]$
    - ^[w][y][\]]$
  preedit_format:
    - "xlit|]|A|"
    - xform/AAA/ (ä¿„-çµ„åˆ)/
    - xform/AA/ (ä¿„-å¤§)/
    - xform/A/ (ä¿„)/
    - xform/\\/ /
    - xform/`/ /

fs_lookup:
  tag: fs_lookup
  dictionary: fullshape.extended
  prism: dif1_fs
  enable_completion: false
  enable_sentence: false
  enable_user_dict: true
  suffix: "="
  disable_user_dict_for_patterns:
    - ^[a-z]{1}[=]$
  preedit_format:
    - "xlit|=|A|"
    - xform/AA/ (å…¨-å¤§)/
    - xform/A/ (å…¨)/
    - xform/\\/ /
    - xform/`/ /
######################èª¿å‡ºå…¶ä»–èªè¨€ä¹‹ç¿»è­¯å™¨(é–‹é ­ç¬¦è™Ÿèª¿å‡ºå„åœ‹èªè¨€è¼¸å…¥)################
easy_en:
  tag: easy_en
  dictionary: easy_en_b
  enable_completion: true
  enable_sentence: true #false
  enable_user_dict: false #true
  prefix: "',"
  tips: "ã€ŠEasyè‹±èªã€‹â–¶"
  preedit_format:
    - xform/^/ã€ŠEasyè‹±èªã€‹/
    - xform/ã€‹;/ã€‹; /
    - xform/ã€‹'/ã€‹' /
    - xform|ã€‹\/|ã€‹\/ |
  comment_format:
    - xform|[~a-z;/.'-]*||

e_reverse_lookup:
  tags: [ easy_en ]
  overwrite_comment: true
  dictionary: easy_en_comment
  comment_format:
    - xform/@@/\n          /
    - xform/@/ /
################################### ä½¿ç”¨æ³¨éŸ³åæŸ¥å˜¸è¦ç±³ç¢¼ ######################################
reverse2_lookup:
  tag: reverse2_lookup
  dictionary: "Mount_bopomo.extended"
  enable_completion: false
  enable_sentence: false
  enable_user_dict: true
  prefix: "';"
  tips: "ã€Šæ³¨éŸ³åæŸ¥ã€‹â–¶"
  preedit_format:
    - "xlit|1qaz2wsxedcrfv5tgbyhnujm8ik,9ol.0p;/-6347|ã„…ã„†ã„‡ã„ˆã„‰ã„Šã„‹ã„Œã„ã„ã„ã„ã„‘ã„’ã„“ã„”ã„•ã„–ã„—ã„˜ã„™ã„§ã„¨ã„©ã„šã„›ã„œã„ã„ã„Ÿã„ ã„¡ã„¢ã„£ã„¤ã„¥ã„¦ËŠË‡Ë‹Ë™|"
    - xform/^/ã€Šæ³¨éŸ³åæŸ¥ã€‹/
    - xform/\\/  /
    - xform/`/  /

ovff_reverse_lookup:
  tags: [ reverse2_lookup ]
  overwrite_comment: true
  dictionary: "dif1.extended"
  comment_format:
    - "xlit|abcdefghijklmnopqrstuvwxyz|á´€Ê™á´„á´…á´‡êœ°É¢ÊœÉªá´Šá´‹ÊŸá´É´á´á´˜Ç«Ê€sá´›á´œá´ á´¡xÊá´¢|"
################################### ä½¿ç”¨å˜¸è¦ç±³åæŸ¥æ³¨éŸ³ç¢¼ ######################################
reverse3_lookup:
  __include: /top_fixed
  tag: reverse3_lookup
  prefix: ";'"
  tips: "ã€ŠæŸ¥æ³¨éŸ³ã€‹â–¶"
  initial_quality: 1000
  extra_tags:
    - reverse3_lookup_extra
  preedit_format:
    - xform/^/ã€ŠæŸ¥æ³¨éŸ³ã€‹/
    - "xlit|abcdefghijklmnopqrstuvwxyz|ABCDEFGHIJKLMNOPQRSTUVWXYZ|"
    - xform/\\/  /
    - xform/`/  /

reverse3_lookup_extra:
  __include: /top_fixed
  tag: reverse3_lookup_extra
  enable_user_dict: true
  initial_quality: 1
  preedit_format:
    - xform/^/ã€ŠæŸ¥æ³¨éŸ³ã€‹/
    - "xlit|abcdefghijklmnopqrstuvwxyz|ABCDEFGHIJKLMNOPQRSTUVWXYZ|"
    - xform/\\/  /
    - xform/`/  /

phonetic_reverse_lookup:
  tags: [ reverse3_lookup ]
  dictionary: "Mount_bopomo.extended"
  overwrite_comment: true
  comment_format:
    - xform/iu/iou/
    - xform/ui/uei/
    - xform/ong/ung/
    - xform/yi?/i/
    - xform/wu?/u/
    - xform/iu/v/
    - xform/([jqx])u/$1v/
    - xform/([iuv])n/$1en/
    - xform/zhi?/Z/
    - xform/chi?/C/
    - xform/shi?/S/
    - xform/([zcsr])i/$1/
    - xform/ai/A/
    - xform/ei/I/
    - xform/ao/O/
    - xform/ou/U/
    - xform/ang/K/
    - xform/eng/G/
    - xform/an/M/
    - xform/en/N/
    - xform/er/R/
    - xform/eh/E/
    - xform/([iv])e/$1E/
    - xform/1/Ë‰/
    - 'xlit|bpmfdtnlgkhjqxZCSrzcsiuvaoeEAIOUMNKGR2345|ã„…ã„†ã„‡ã„ˆã„‰ã„Šã„‹ã„Œã„ã„ã„ã„ã„‘ã„’ã„“ã„”ã„•ã„–ã„—ã„˜ã„™ã„§ã„¨ã„©ã„šã„›ã„œã„ã„ã„Ÿã„ ã„¡ã„¢ã„£ã„¤ã„¥ã„¦ËŠË‡Ë‹Ë™|'
    - xform/^/ /
    - xform/ /   /
#    - xform/ /] [/
#    - xform/^/  [/
#    - xform/$/]/
################################### æ³¨éŸ³æ–‡ ######################################
all_bpm:
  tag: all_bpm
  dictionary: allbpm
  enable_completion: false
  enable_sentence: false
  enable_user_dict: false
  prefix: "';'"
  tips: "ã€Šæ³¨éŸ³æ–‡ã€‹â–¶"
  preedit_format:
    - xform/^/ã€Šæ³¨éŸ³æ–‡ã€‹/
    - "xlit|1qaz2wsxedcrfv5tgbyhnujm8ik,9ol.0p;/-6347'|ã„…ã„†ã„‡ã„ˆã„‰ã„Šã„‹ã„Œã„ã„ã„ã„ã„‘ã„’ã„“ã„”ã„•ã„–ã„—ã„˜ã„™ã„§ã„¨ã„©ã„šã„›ã„œã„ã„ã„Ÿã„ ã„¡ã„¢ã„£ã„¤ã„¥ã„¦ËŠË‡Ë‹Ë™Ë‰|"
    - xform/\\//
    - xform/`//
################################### ç³»åˆ—ç¬¦è™Ÿ ######################################
emoji_series:
  tag: emoji_series
  dictionary: symbols_ocm
  enable_completion: false
  enable_sentence: false
  enable_user_dict: true
  prefix: ";"
  tips: "ã€ŠEMOJIé›†ã€‹â–¶"
  preedit_format:
    __include: element_ocm:/emoji_series
################################### æ¨™é»ç¬¦è™Ÿè™•ç† ######################################
punctuator:
  import_preset: punct_ocm
  symbols:
    "s." : [ "ï¼Ÿ" ] #
    "v." : [ "ï¼" ] #
    "c." : [ "ï¼" ] #
################################ æŒ‰éµè™•ç† ###################################
key_binder:
  import_preset: default
  bindings:
    __include: element_ocm:/key_binder

editor:
  bindings:
    Return: confirm #ä½¿ç”¨ express_editor æ™‚é–‹å•Ÿ #commit_composition
    Shift+Return: commit_raw_input
#    Control+Return: commit_script_text
#    Shift+Return: commit_script_text
#################################### ç”¨æ­£å‰‡èª¿å‡ºå„ç¨®åŠŸèƒ½ ############################################
recognizer:
  patterns:
#    uppercase: "^[A-Z][-_+.'0-9A-Za-z]*$" #é–‹å•Ÿç”¨shiftæ‰“å¤§å¯«ï¼Œæœƒå‡ºç¾é¸å–®ï¼Œä¸ç›´æ¥ä¸Šå±ã€‚
    url: "^(https?:|ftp:|mailto:).*$"
    email: "^[a-z][-_.0-9a-z]*@.*$"
    punct: "^[svc][.]?$|[=][=][=]?$|[=]['][']?[=]?[']?[']?$|[=]?[][][][]?[']?$|[=]?[[][[]?[']?[=]?[]]?[]]?[']?$|[=][`][`]?$|[=][-,./;][-,./;]?$|[=][,][,]?[=][.][.]?$|[=][0-9] ?$|[=][9][=][0]?$|[=][=][].,90'[]+ ?$"
    pt: "^[,.][,.'a-z]*$|^[']['a-z]*$|^[,][][]+[a-z]*$"
    jphi_lookup: "^([-a-z]+[,][-a-z,]*)+$"
    jpka_lookup: "^(?![svc][.])([-a-z]+[.][-a-z.]*)+$"
    korea_lookup: "^([a-z]+[/][a-z/]*)+$"
    latin_lookup: "^([-a-z]+['][']?[']?[-a-z']*)+$"
    cyr_lookup: "^([a-z]+[]][]]?[]]?[]a-z]*)+$"
    gr_lookup: "^([a-z]+[[][[]?[a-z[]*)+$"
    fs_lookup: "^([-a-z]+[=][=]?[-a-z=]*)+$"
    reverse2_lookup: "^';[-.,;/0-9a-z]*$"
    reverse3_lookup: "^;'[\\a-z`]*$"
    easy_en: "^',[a-z;/.'-]*$"
    emoji_series: "^;[a-z]*$|^[;][;][-0-9a-z]$|^[;][0-9]$|^[;][0-9][-][0-9]?$" #|^[;][a-z][b]?$
#    ç¬¬ä¸€å€‹ä¸èƒ½åˆªï¼Œå¦å‰‡ç„¡æ³•ç”¨æ•¸å­—é¸æ“‡ã€‚
#    ã€Œ-ã€ä¸èƒ½åˆªï¼Œé¡æ–‡å­—æœƒç”¨åˆ°ã€‚
    all_bpm: "^';'[-a-z0-9.,/;']*$"
    lua: "^'/[';]?[a-z0-9/-]*$"
